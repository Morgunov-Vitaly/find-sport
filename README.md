# FindSport

Тестовый pet-проект на базе php 8.2 и MySql в докер-контейнерах.
Задание выполняется в виде консольных команд. 
Для запуска приложения сначала надо развернуть докер контейнеры. 
Для удобства это можно сделать с помощью bash скрипта `bash deploy.sh`. При этом развернется локальное окружение,
будут созданы и наполнены исходными данными таблицы БД в соответствии с исходными данным задания. 
Также будет выполнен автоматический вход в терминал докер контейнера с php.
Для запуска основного скрипта, который выполняет решение задания (в файле index.php) выполните `php index.php`

Важная оговорка! В случае решения подобной проблемы на проде, помимо устранения дублей нужно было бы также изменить схему 
таблицы sessions - добавить условие уникальности составного индекса sessions.start_time + sessions.session_configuration_id
для предотвращения появления дублей в будущем.


# Описание команд
## Bash команды
- `bash deploy.sh` - для запуска автоматического развертывания проекта с миграциями
- `bash reset.sh` - для остановки докер-контейнеров и удаления таблиц в БД
- `bash run-bash.sh` - для запуска терминала внутри контейнера php

## Команды php
- `php index.php` - для запуска основного скрипта, который выполняет решение по удалению дублей
- `php commands/db-reset.php` - восстановление БД к исходному состоянию (удаление, накат миграций и заполнение первичными данными)
Это может быть полезно для повторного запуска задания.
- `php commands/migrations.php` - создание таблиц БД (накат миграций)
- `php commands/seeds.php` - наполнение БД исходными данными
- `php commands/migrations-reset.php` - откат миграций - удаление таблиц БД

## Команжы docker-compose 
- `docker-compose up-d` - для запуска проекта в контейнерах
- `docker-compose down --remove-orphans` - для остановки докер-контейнеров 
- `docker exec -it fs_app_php bash` - для входа в контейнер или запустите скрипт `run-bash.sh`